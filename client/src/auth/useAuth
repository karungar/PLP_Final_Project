import { useState, useEffect } from 'react';
import { 
  register, 
  login, 
  logout, 
  updateProfile, 
  subscribe,
  getAuthState
} from './authService';

export function useAuth() {
  const [state, setState] = useState(getAuthState());

  useEffect(() => {
    const unsubscribe = subscribe(() => {
      setState(getAuthState());
    });
    return unsubscribe;
  }, []);

  return {
    ...state,
    register,
    login,
    logout,
    updateProfile
  };
}